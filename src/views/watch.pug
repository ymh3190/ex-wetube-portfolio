extends layouts/main.pug

block content 
    h1 watch
    .videoPlayer#videoPlayer
        video(src=`/${video.path}` width="1000" height="400" data-id=video.id)
        .videoControllers
            .videoControllers__timeline#timeline
                .videoControllers__timeline-drag#timelineDrag
                span.videoControllers__timeline-progress#timelineProgress
            .videoControllers__container
                .videoControllers__container-column
                    .videoControllers__container-column__play
                        i.fa-solid.fa-play#playIcon
                    .videoControllers__container-column__volume
                        i.fa-solid.fa-volume-high#volumeIcon
                        input#volumeInput(type="range", name="volume" value='100')
                    .videoControllers__container-column__time
                        span.videoControllers__container-column__time-current-time#currentTimeSpan 00:00
                        span.videoControllers__container-column__time-slash /
                        span.videoControllers__container-column__time-total-time#totalTimeSpan 00:00
                .videoControllers__container-column
                    .videoControllers__container-column__expand 
                        i.fa-solid.fa-expand#expandIcon
    div
        h2=video.title
        div
            span#views=video.metadata.views
            span 회
        h2 #{video.createdAt.getFullYear()}년
        h2 #{video.createdAt.getMonth()+1}월
        h2 #{video.createdAt.getDate()}일
        div
            i.fa-solid.fa-thumbs-up#likeIcon
            span#likedCount=video.metadata.liked
        div
            i.fa-solid.fa-thumbs-down#dislikeIcon
            span#dislikedCount=video.metadata.disliked
    div 
        img(src=user.profilePhoto, alt="" width="50" height="50")
        h2=user.username
        h3 #{user.subscribers} 구독자
        button 구독
    div 
        div=video.description
    div 
        div
            div 
                span 댓글
                span#commentsLength=video.comments.length
                span 개
            div 정렬 기준
            div 
                div 인기 댓글순
                div#newestFirst 최신순
        div
            img(src=user.profilePhoto, alt="" width="50" height="50")
            form#commentForm
                input#commentInput(type="text" name="comment" placeholder="댓글 추가...")
                div#cancelComment(style="display: none;")
                    button(type="button") 취소
                    button#commentBtn(disabled) 댓글
        div#commentContainers
            each comment in video.comments.reverse()
                div
                    img(src=comment.owner.profilePhoto, alt="" width="50" height="50")
                    h2=comment.owner.username
                    h2=comment.createdAt
                    span=comment.text
                    if user._id === comment.owner._id.toString()
                        div#delComment(data-id=comment._id) ❌

block scripts 
    script(src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.2/gsap.min.js") 
    script(src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.2/Draggable.min.js") 
    script(src="/public/js/gsap.js") 
    script(src="/public/js/watch.js")
    script(src="/public/js/comment.js") 