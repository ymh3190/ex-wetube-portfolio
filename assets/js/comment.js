(()=>{function e(e,t,n,r,a,i,o){try{var c=e[i](o),m=c.value}catch(e){return void n(e)}c.done?t(m):Promise.resolve(m).then(r,a)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(a,i){var o=t.apply(n,r);function c(t){e(o,a,i,c,m,"next",t)}function m(t){e(o,a,i,c,m,"throw",t)}c(void 0)}))}}var n=document.querySelector("video"),r=document.getElementById("tertiaryMiddle"),a=document.getElementById("commentForm"),i=document.getElementById("commentInput"),o=document.getElementById("cancelOrComment"),c=document.getElementById("cancelBtn"),m=(document.getElementById("commentBtn"),document.querySelectorAll("#delComment")),d=document.getElementById("commentContainers"),s=document.getElementById("commentsLength");function l(e,t,n){var r=document.createElement("div");r.className="watchcontainers-container-details__tertiary-bottom-commentcontainer";var a=document.createElement("img");a.src=t.profilePhoto,a.width=50,a.height=50,r.appendChild(a);var i=document.createElement("div");i.className="watchcontainers-container-details__tertiary-bottom-commentcontainer-info";var o=document.createElement("span");o.className="watchcontainers-container-details__tertiary-bottom-commentcontainer-info-owner",o.innerText=t.username,i.appendChild(o);var c=document.createElement("span");c.className="watchcontainers-container-details__tertiary-bottom-commentcontainer-info-createdAt",c.innerText=(new Date).toISOString().substring(0,19),i.appendChild(c);var m=document.createElement("div");m.className="watchcontainers-container-details__tertiary-bottom-commentcontainer-info-text",m.innerText=e,i.appendChild(m);var l=document.createElement("div");l.className="watchcontainers-container-details__tertiary-bottom-commentcontainer-info-del",l.innerText="‚ùå",l.dataset.id=n,i.appendChild(l),l.addEventListener("click",p),r.appendChild(i),d.prepend(r),s.innerText=parseInt(s.innerText,10)+1}function u(){return(u=t(regeneratorRuntime.mark((function e(t){var r,a,o,c,m,d,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=i.value,i.value="",a=n.dataset.id,r){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,fetch("/api/comment",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:r,id:a})});case 8:if(200!==(o=e.sent).status){e.next=18;break}return e.next=12,o.json();case 12:c=e.sent,m=c.text,d=c.user,s=c.commentId,l(m,d,s),h();case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return v.apply(this,arguments)}function v(){return(v=t(regeneratorRuntime.mark((function e(t){var r,a,i,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.dataset.id,a=n.dataset.id,e.next=4,fetch("/api/comment/del",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({commentId:r,videoId:a})});case 4:200===e.sent.status&&(i=t.target.parentElement.parentElement,o=t.target.parentElement,c=i.querySelector("img"),i.removeChild(o),i.removeChild(c),s.innerText=parseInt(s.innerText,10)-1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){o.style.visibility="hidden",r.style.marginBottom="0",i.value=""}a&&(a.addEventListener("submit",(function(e){return u.apply(this,arguments)})),i.addEventListener("focus",(function(){o.style.visibility="visible",r.style.marginBottom="5%"})),c.addEventListener("click",h),m.forEach((function(e){return e.addEventListener("click",p)})))})();