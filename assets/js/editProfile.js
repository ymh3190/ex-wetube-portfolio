(()=>{function e(e,t,n,r,a,u,o){try{var s=e[u](o),i=s.value}catch(e){return void n(e)}s.done?t(i):Promise.resolve(i).then(r,a)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(a,u){var o=t.apply(n,r);function s(t){e(o,a,u,s,i,"next",t)}function i(t){e(o,a,u,s,i,"throw",t)}s(void 0)}))}}var n=document.getElementById("accountInfo"),r=document.getElementById("lastNameInput"),a=document.getElementById("firstNameInput"),u=document.getElementById("usernameInput");function o(){return(o=t(regeneratorRuntime.mark((function e(t){var n,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=r.value,o=a.value,s=u.value,n){e.next=8;break}return e.abrupt("return",r.placeholder="성을 입력하세요.");case 8:if(o){e.next=12;break}return e.abrupt("return",a.placeholder="이름을 입력하세요.");case 12:if(s){e.next=14;break}return e.abrupt("return",u.placeholder="유저 이름을 입력하세요.");case 14:return e.next=16,fetch("/api/save-info",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:o,lastName:n,username:s})});case 16:if(201!==e.sent.status){e.next=19;break}return e.abrupt("return",alert("계정 정보가 변경됐습니다."));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.addEventListener("submit",(function(e){return o.apply(this,arguments)}));var s=document.getElementById("emailForm"),i=document.getElementById("emailInput");function c(){return(c=t(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=i.value){e.next=4;break}return e.abrupt("return",i.placeholder="이메일을 입력하세요.");case 4:return e.next=6,fetch("/api/changeEmail",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})});case 6:if(201!==(r=e.sent).status){e.next=11;break}return e.abrupt("return",alert("이메일을 변경했습니다."));case 11:if(400!==r.status){e.next=13;break}return e.abrupt("return",alert("이미 존재하는 이메일입니다."));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}document.getElementById("changeEmail"),s.addEventListener("submit",(function(e){return c.apply(this,arguments)}));var p=document.getElementById("passwordForm"),d=document.getElementById("passwordInput"),l=document.getElementById("confirmInput");function m(){return(m=t(regeneratorRuntime.mark((function e(t){var n,r,a,u,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=d.value,r=l.value,n){e.next=7;break}return e.abrupt("return",d.placeholder="비밀번호를 입력하세요.");case 7:if(n===r){e.next=9;break}return e.abrupt("return",l.placeholder="비밀번호가 일치하지 않습니다.");case 9:return e.next=11,fetch("/api/changePassword",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:n})});case 11:if(201!==(a=e.sent).status){e.next=16;break}return e.abrupt("return",alert("비밀번호를 변경했습니다."));case 16:if(400!==a.status){e.next=22;break}return e.next=19,a.json();case 19:return u=e.sent,o=u.errorMessage,e.abrupt("return",alert(o));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}p&&p.addEventListener("submit",(function(e){return m.apply(this,arguments)}));var f=document.getElementById("photoForm"),h=document.getElementById("photoImg"),v=document.getElementById("photoFileInput");function y(){return(y=t(regeneratorRuntime.mark((function e(t){var n,r,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=new FormData(f)).append("file",v),v.value="",e.next=6,fetch("/api/updatePhoto",{method:"post",body:n});case 6:if(201!==(r=e.sent).status){e.next=13;break}return e.next=10,r.json();case 10:a=e.sent,u=a.path,h.src=u;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}f.addEventListener("submit",(function(e){return y.apply(this,arguments)}));var b=document.getElementById("deleteAccountForm"),g=document.getElementById("deleteAccountInput");function x(){return(x=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!g.checked){e.next=6;break}return e.next=4,fetch("/api/deleteAccount");case 4:200===e.sent.status&&(alert("계정을 삭제했습니다."),window.location.href="/");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}b.addEventListener("submit",(function(e){return x.apply(this,arguments)}))})();